# ITER-20260219-01

## Objetivo
Implementar control operativo de recursos activos por fase y reforzar trazabilidad de costos en los tutoriales sin crear nueva estructura Terraform en este repositorio.

## Cambios
- Se agrego `scripts/check_tutorial_resources_active.sh` con:
  - inventario fijo por fase (`00..07` y `all`),
  - perfil obligatorio `data-science-user`,
  - filtros por `project=titanic-sagemaker` y fallback por prefijo `titanic-`,
  - cobertura de servicios: S3, SageMaker, ECS, Lambda, Step Functions, EventBridge, Scheduler, CloudWatch, ECR, EC2 y Budgets,
  - resumen por servicio (`active`, `inactive`, `unknown`) y detalle por recurso,
  - modo `--fail-if-active` para gates CI/smoke de gobierno.
- Se actualizaron tutoriales para control de costos y tagging obligatorio:
  - `docs/tutorials/00-foundations.md`
  - `docs/tutorials/05-cicd-github-actions.md`
  - `docs/tutorials/07-cost-governance.md`
  - `docs/tutorials/README.md`

## Evidencia
- Validacion sintactica:
  - `bash -n scripts/check_tutorial_resources_active.sh`
- Ayuda del comando:
  - `scripts/check_tutorial_resources_active.sh --help`
- Corrida real en AWS:
  - `AWS_PROFILE=data-science-user scripts/check_tutorial_resources_active.sh --phase all`
  - Resultado: script completo, summary emitido, warning de permisos EC2 manejado sin abortar.
- Prueba de guardrail de identidad:
  - `scripts/check_tutorial_resources_active.sh --phase all --profile default`
  - Resultado esperado: falla con error por perfil distinto de `data-science-user`.

## Decisiones
- Se separo la entrega en 2 commits:
  1. snapshot del estado actual previo,
  2. feature del checker + guias de costo.
- Se priorizo modo read-only con degradacion controlada (`warning + unknown`) cuando faltan permisos en servicios puntuales.
- La parte Terraform de costos se documento como estandar obligatorio (tags + `default_tags`) sin generar carpetas/modulos nuevos en este paso.

## Riesgos
- Si los recursos no usan tags `project=titanic-sagemaker` ni prefijo `titanic-`, pueden no entrar en el inventario.
- Algunos servicios pueden quedar en `unknown` por IAM least-privilege (ej. `ec2:DescribeInstances`).
- El script consulta hasta 100 recursos por servicio; en cuentas con mayor volumen se requiere paginacion extendida.

## Siguiente paso
Integrar `scripts/check_tutorial_resources_active.sh --phase all` como artefacto obligatorio en workflows de CI/CD y definir budgets `titanic-dev-monthly-cost` / `titanic-prod-monthly-cost` en la cuenta objetivo.
