# ITER-20260219-05

## Objetivo y contexto
Alinear de forma estricta la fase 02 (manual) frente a la fase 03 (MLOps canonico) para eliminar ambiguedad en los inputs del pipeline.

## Decisiones tecnicas y alternativas descartadas
- Se define que fase 03 inicia siempre desde datos `curated/*` de fase 01.
- Se formaliza que `train_xgb.csv`, `validation_xgb.csv`, `validation_features_xgb.csv` y `validation_labels.csv` son artefactos internos de `DataPreProcessing` en fase 03.
- Fase 02 mantiene su rol de ensayo manual y entrega baseline/umbral/evidencia, sin imponer CSV procesados manualmente como contrato de entrada de fase 03.
- Se descarta mantener un contrato mixto (manual + pipeline) porque genera drift y bloqueos tras reset de tutorial 2.

## IAM usado (roles/policies/permisos clave)
- No hay cambios IAM en esta iteracion.
- Se mantiene identidad operativa `data-science-user` y region operativa `eu-west-1`.

## Comandos ejecutados y resultado esperado
- `nl -ba docs/tutorials/03-sagemaker-pipeline.md | sed -n '1,260p'`
- `nl -ba docs/tutorials/02-training-validation.md | sed -n '1,460p'`
- `nl -ba docs/tutorials/README.md | sed -n '1,260p'`

Resultado esperado:
- fase 03 documentada con input externo `curated/train.csv` + `curated/validation.csv`.
- handoff de fase 02 centrado en gate de calidad y baseline, no en CSV manuales.
- roadmap con separacion explicita manual (fase 02) -> MLOps canonico (fase 03).

## Evidencia (outputs, logs, metricas)
Archivos actualizados:
- `docs/tutorials/03-sagemaker-pipeline.md`
- `docs/tutorials/02-training-validation.md`
- `docs/tutorials/README.md`

Puntos de evidencia del cambio:
- En fase 03 se elimina prerequisito de regenerar/subir `training/xgboost/*` antes de iniciar pipeline.
- En fase 03 se deja nota explicita de artefactos internos de `DataPreProcessing`.
- En fase 02 se cambia el handoff para que entregue umbral (`accuracy >= 0.78`), hiperparametros baseline y evidencia (`metrics.json`, `promotion_decision.json`).

## Riesgos/pendientes
- Falta aterrizar en Terraform de fase 03 el contrato de parametros de pipeline para forzar esta separacion a nivel IaC.
- Si existen runbooks antiguos que mencionan `training/xgboost/*` como prerequisito de fase 03, deben actualizarse para evitar ejecuciones inconsistentes.

## Proximo paso
Implementar el modulo Terraform de fase 03 (pipeline) con parametros de entrada `curated/*`, condicion de calidad `accuracy >= 0.78` y registro en Model Registry con `PendingManualApproval`.
